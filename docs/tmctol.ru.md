# Спецификация фреймворка `TMCTOL`

## Аннотация

TMCTOL (Token Minting Curve + Treasury-Owned Liquidity / Кривая эмиссии токенов + Ликвидность, контролируемая казначейством) — это токеномический фреймворк, устанавливающий математически определенные ценовые границы через накопление ликвидности, контролируемой казначейством. Система сочетает однонаправленную эмиссию токенов с автоматизированным распределением резервов XYK для создания расчетной защиты от падения в диапазоне от 11% до 25% от равновесной цены, при условии что управление поддерживает заданные системные параметры.

`Ключевые свойства`:

- Линейный ценовой потолок через кривую эмиссии: `P_ceiling = P₀ + m·S/PRECISION`
- Гиперболический ценовой пол через механику XYK: `P_floor = R_foreign/(R_native + S_sold)²`
- Сжатие предложения через сжигание комиссий (0,5% комиссия роутера)
- Многокорзинная архитектура TOL, обеспечивающая гибкость управления

`Матрица позиционирования 2×2 (только аббревиатуры)`:

| Кривая ↓ / Ликвидность → | `POL`    | `TOL`    |
| :----------------------- | :------- | :------- |
| `TBC`                    | `TBCPOL` | `TBCTOL` |
| `TMC`                    | `TMCPOL` | `TMCTOL` |

`Глоссарий базовых элементов`:

- `TBC`: Двунаправленная кривая mint/redeem, как правило симметричная в пространстве формулы (существует путь извлечения резервов)
- `TMC`: Однонаправленная кривая mint-only, по природе формирующая асимметричную рыночную структуру (путь извлечения резервов отсутствует)
- `POL`: Protocol-Owned Liquidity — класс владения, где LP-инвентарь находится на аккаунтах протокола; перманентность зависит от политики (жёсткая блокировка или governance-withdraw)
- `TOL`: Treasury-Owned Liquidity — структурированная treasury-политика поверх протокольной ликвидности с явными ролями корзин; в TMCTOL Корзина_A — слой перманентного якоря, B/C/D — policy-flex корзины

`Профили комбинаций (возможность и свойства)`:

| Комбинация  | Ключевые свойства                                                                                                                                            |
| :---------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `TBC + POL` | Возможна только при наличии явного источника накопления (fees/spread/surplus/seed); иначе redeem-поток склонен расходовать резервы и POL не растёт устойчиво |
| `TBC + TOL` | Добавляет treasury-дисциплину и сегментацию, но всё равно требует выделенного притока в LP-казну; redeem-путь сохраняет давление извлечения                  |
| `TMC + POL` | Естественно поддерживает накопление резервов, если mint-side аллокации направляются в протокольный LP; качество пола зависит от жёсткости treasury-политики  |
| `TMC + TOL` | Однонаправленная эмиссия + явная политика защиты пола (Anchor/Building/Capital/Dormant), максимальная жёсткость пола и прозрачность управления               |

`Связь понятий`: TOL — это структурированный policy-слой над POL. Любой LP внутри TOL по владению является POL, но не всякий POL-дизайн является TOL.

`Интерпретация`: TMCTOL осознанно занимает квадрант `TMC + TOL`, объединяя необратимость mint-механики с явно заданной политикой управления ликвидностью.

---

## 1. Основы фреймворка

### 1.1 Ключевая инновация

TMCTOL решает фундаментальную проблему неограниченного риска снижения в токеномике путем установления `математически ограниченного риска` через взаимодействие трех механизмов:

1. `Однонаправленная кривая эмиссии (TMC)`: Создает детерминированный ценовой потолок без опции выкупа
2. `Ликвидность, контролируемая казначейством (TOL)`: Автоматически распределяет 66,6% эмиссии в контролируемые протоколом резервы XYK
3. `Роутер со сжиганием комиссий`: Направляет 0,5% торговых комиссий на сжатие предложения

Фреймворк преобразует неограниченное снижение в расчетный диапазон, где защита пола явно зависит от поддержания управлением системных условий.

### 1.2 Зависимости от управления

Все свойства ценовой защиты являются `условными гарантиями`, требующими:

`Условные требования`:

- Ликвидность TOL остается распределенной в пулы XYK (управление не должно выводить резервы)
- Коэффициенты распределения поддерживаются согласно спецификации протокола (66,6% TOL, 33,3% распределение пользователям)
- Механизм сжигания комиссий работает непрерывно (сбор комиссий роутера и исполнение сжигания)
- Параметры многокорзинной системы соблюдаются (Корзина_A выделена для защиты пола)

`Риски управления`:

- Вывод казначейством TOL пропорционально снижает эффективный пол
- Изменения коэффициентов распределения изменяют расчеты границ
- Активация аварийных механизмов может обойти ограничения
- Стратегическое развертывание корзин влияет на реализованный уровень пола (диапазон 11-25%)

`Критическое различие`: Фреймворк обеспечивает "математически определенные границы риска", а не "абсолютную безопасность". Сохранение пола представляет собой системное свойство, зависящее от управления и требующее непрерывного соблюдения параметров. Традиционные токены демонстрируют неограниченное снижение независимо от качества управления; TMCTOL ограничивает этот риск через прозрачные математические отношения, зависящие от поддержания заданных условий.

---

## 2. Техническая архитектура

### 2.1 Базовая система типов

`Размерные типы с масштабированием PRECISION (10¹²)`:

- `Balance`: Количества нативных токенов
- `Price [Foreign/Native]`: Обменные курсы, масштабированные PRECISION
- `Slope [Foreign/Native²]`: Параметр скорости линейной эмиссии
- `Permill`: Отношение в миллионных долях (10⁶) для безразмерных величин

`Назначение`: Система типов кодирует физические единицы, предотвращая категориальные ошибки. Операции с ценами сохраняют размерную корректность; операции с отношениями поддерживают разделение масштабов.

### 2.2 Математика кривой эмиссии

`Модель линейной эмиссии`:

```
spot_price(S) = P₀ + m·S/PRECISION

где:
  P₀ = начальная_цена
  m = параметр наклона [Foreign/Native²]
  S = текущее предложение
```

`Квадратичное интегрирование для эмиссии`:

```
Расчет платежа интегрирует ценовую кривую:
F_required = P₀·ΔS + m·(S₀·ΔS + ΔS²/2)/PRECISION

где:
  F_required = требуемый платеж в иностранной валюте
  S₀ = предложение до эмиссии
  ΔS = токенов для эмиссии
```

`Свойство`: Детерминированное ценообразование обеспечивает единственную котировку для данного состояния предложения и снижает ценовую неоднозначность.

### 2.3 Распределение токенов

`Двухстороннее разделение`:

- Распределение пользователям: 33,3% (немедленная ликвидность)
- Распределение TOL: 66,6% (резервы протокола)

`Инвариант сохранения`:

```
user_amount + tol_amount ≡ total_minted
```

Распределение происходит атомарно внутри транзакции эмиссии; токены не существуют вне этих двух распределений. Это устраняет сложность традиционной токеномики (вестинг команды, казначейство отдельно от ликвидности) путем консолидации в структуру TOL, контролируемую управлением.

### 2.4 Многокорзинная архитектура TOL

`Структура корзин (66,6% общего распределения)`:

- `Корзина_A (33,3% общего предложения)`: Anchor-ликвидность — основной механизм защиты пола. Гарантия пола сохраняется при поддержании 33,3% циркулирующего предложения в ликвидности. Если доля Корзины_A превышает этот порог (из-за сжатия предложения или стратегического накопления), избыточная ликвидность может быть мигрирована в внешние DEX-экосистемы для экспансии.
- `Корзина_B (11,1% общего предложения)`: Building-бюджет — расходы на строительство экосистемы (разработка, инфраструктура, инструменты, интеграции).
- `Корзина_C (11,1% общего предложения)`: Capital-корзина — операционная ликвидность для контролируемого перераспределения между LP-позициями и казначейскими балансами.
- `Корзина_D (11,1% общего предложения)`: Dormant LP-резерв — ликвидность, припаркованная до стратегической активации через governance.

`Распределение vs. Циркулирующая доля`: Начальные распределения по корзинам представляют фиксированные проценты от общего предложения при минте. Однако циркулирующие доли (процент текущего предложения, удерживаемый каждой корзиной) эволюционируют динамически через сжигание токенов и стратегические перераспределения. Это различие позволяет системе поддерживать гарантии защиты пола, одновременно позволяя расширение казны.

`Эффективность капитала`: Четыре независимых пула XYK достигают ~100% использования капитала через циклы непрерывного развертывания (с временными буферами для операций Zap) против 0% для традиционных казначейств, держащих необеспеченные токены. Каждая корзина поддерживает отдельные LP-позиции, обеспечивая детальный контроль управления.

`Диапазон защиты пола`: Эффективный пол варьируется в зависимости от использования корзин:

- `Максимум (25%)`: Все корзины обеспечивают поддержку пола, развертывания нет
- `Минимум (11%)`: Только Корзина_A обеспечивает поддержку пола, остальные развернуты
- `Типично`: Управление балансирует между защитой пола и развитием экосистемы
- `Миграция избыточной ликвидности`: Сжигание токенов увеличивает относительные доли всех корзин в циркулирующем предложении. Для Корзины_A защита пола гарантируется поддержанием 33,3% циркулирующего предложения в ликвидности. Когда доля Корзины_A превышает этот порог из-за сжатия предложения, управление может авторизовать миграцию избыточной ликвидности в другие экосистемы DEX для стимулирования арбитража и расширения экосистемы

### 2.5 Механизм осевого роутера

`Шлюз обнаружения цены`:

- Сравнивает спотовую цену TMC с ценообразованием пула XYK
- Направляет сделки к механизму с лучшим исполнением
- Собирает комиссию 0,5% (по умолчанию), направляемую на сжигание
- Излучает тип маршрута (TMC/XYK) для прозрачности

`Структура комиссий`:

- Комиссия роутера: 0,5% → 100% сжигается (сжатие предложения)
- Комиссия XYK: 0,0% (по умолчанию) → максимизирует узость спреда
- Управление может активировать комиссии XYK для дополнительной дефляции

`Критическая функция`: Роутер обеспечивает последовательное обнаружение цены, создавая дефляционное давление через обязательное сжигание комиссий. Без роутера существовали бы арбитражные возможности между ценообразованием TMC и XYK.

### 2.6 Механизм Zap-ликвидности

`Назначение`: Интеллектуальное добавление ликвидности с обработкой ценовых дисбалансов между нативными/иностранными резервами.

`Стратегия`: Когда цена пула отклоняется от справедливой стоимости, механизм Zap:

1. Рассчитывает оптимальное разделение между нативными/иностранными вкладами
2. Меняет избыточную часть несбалансированного актива
3. Добавляет ликвидность со сбалансированными коэффициентами
4. Максимизирует полученные LP-токены на вклад

`Защита`: Толерантность к проскальзыванию (по умолчанию 5%) предотвращает извлечение стоимости во время инициализации пула или больших дисбалансов. Механизм обеспечивает достижение распределениями TOL максимальной глубины ликвидности.

### 2.7 Система сжигания комиссий

`Фаза накопления`:

- Роутер собирает комиссии в иностранном активе
- Комиссии накапливаются в буфере до минимального порога
- Предотвращает пыльные сжигания, расходующие газ

`Фаза исполнения`:

- Меняет комиссии на нативные токены через роутер (исполнение по лучшему маршруту среди доступных механизмов, как правило XYK)
- Сжигает нативные токены (удаляет из общего предложения)
- Обновляет метрику total_burned для прозрачности

`Динамика предложения`: Сжигание создает двунаправленное сжатие — потолок снижается (меньше токенов при заданном наклоне), пол повышается (фиксированные резервы делятся на меньшее предложение). Это ускоряет сходимость к равновесию.

---

## 3. Математические основы

### 3.1 Необходимость постоянного произведения XYK

`Математическая база`:

```
Инвариант XYK: k = R_native × R_foreign (константа)

После продажи ΔS нативных токенов:
R_native' = R_native + ΔS
R_foreign' = k / R_native'

Цена = R_foreign' / R_native' > 0 для всех конечных ΔS
```

`Критическое свойство`: Иностранные резервы асимптотически приближаются к нулю, но никогда не достигают нуля. Эта математическая гарантия лежит в основе защиты пола — цена может ухудшаться бесконечно, но никогда не достигает нулевой стоимости.

`Сравнение с концентрированной ликвидностью`:

Концентрированная ликвидность истощается при определенных порогах:

```
Точка истощения: θ = 1/(1 + A^(1/3))

A = 10:  резервы истощены при падении цены на 24%
A = 50:  резервы истощены при падении цены на 15,7%
A = 100: резервы истощены при падении цены на 9,1%
```

`Анализ`: Постоянное произведение поддерживает ненулевые резервы при всех сценариях ухудшения цены. Концентрированная ликвидность демонстрирует прерывистое поведение резервов, где защита пола полностью отказывает за порогом истощения. "Неэффективность" XYK (более широкие спреды) является именно его силой для механизмов защиты пола.

### 3.2 Ценовые границы

`Определение потолка`:

```
P_ceiling(S) = P₀ + m·S/PRECISION

Свойства:
- Монотонно возрастает с предложением
- Детерминирован (нет зависимости от рынка)
- Инвариантен к управлению (изменяется только через модификацию параметров)
```

`Расчет пола`:

```
k = R_TOL_native × R_TOL_foreign (инвариант постоянного произведения)
R_native' = R_TOL_native + S_sold
P_floor = k / (R_native')²

Производное приближение:
P_floor / P_ceiling ≈ 1 / (1 + s/a)²
где s = S_sold/S_total и a = доля поддержки пола (например, a ≈ 1/3 для Корзины_A)
```

`Анализ сценариев` (при базовой поддержке `a = 33.3%`):

| Сценарий     | Источник продаж (Source)         | Доля продаж (`s`) | Отношение пол/потолок | Волатильность |
| :----------- | :------------------------------- | :---------------- | :-------------------- | :------------ |
| Выход Users  | Публичная аллокация (33%)        | 0.333             | 25%                   | 4×            |
| Выход System | Публичная + Казначейская (B/C/D) | 0.667             | 11%                   | 9×            |

`Ключевая зависимость`:

- `Выход Users`: Представляет полную продажу начального публичного предложения. При поддержке Корзины_A (`a=33%`) пол удерживается на уровне 25%.
- `Выход System`: Представляет катастрофический сценарий, где казначейские корзины (B, C, D) входят в оборот и также продаются. При соблюдении предположений протокола Корзина_A подразумевает приблизительно 11% моделируемый коэффициент пола в этом стрессовом сценарии.

### 3.3 Анализ храпового эффекта

`Механизм`: Повышение пола происходит через асимметричное взаимодействие компонентов:

`Зависимости компонентов`:

1. `Ценообразование TMC`: Линейная кривая предложения `P(S) = P₀ + m·S/PRECISION`
2. `Распределение TOL`: Фиксированный коэффициент резервов, поддерживаемый управлением
3. `Сжигание предложения`: Сжатие, управляемое комиссиями `dS/dt = -f·V_trade`

`Взаимодействие системы`:

Когда сжигание уменьшает циркулирующее предложение (`S_circ`) на `ΔS`:

1.  `Сжатие предложения`: `S'_circ = S_circ - ΔS`
2.  `Повышение пола`: Максимально возможный баланс пула уменьшается, повышая пол.
    ```
    P'_floor = k / (R_native + S'_circ)² > k / (R_native + S_circ)²
    ```
3.  `Снижение потолка`: Цена минтинга снижается при сокращении предложения.
    ```
    P'_ceiling = P(S'_circ) < P(S_circ)
    ```
4.  `Результат`: Ценовой коридор сжимается с обеих сторон (Двунаправленная компрессия).

`Скорость повышения пола`:

```
dP_floor/dt ∝ (скорость_сжигания × R_foreign) / (R_native)⁴

Свойства:
- Ускорение возрастает при уменьшении R_native
- Скорость пропорциональна скорости сжигания (управление контролирует через комиссии)
- Квадратичный знаменатель создает сверхлинейный рост
```

`Эволюция фаз`:

`Фаза 1 — Раннее накопление` (низкое отношение TOL/предложение):

- Доминирует ценообразование TMC, спреды XYK широкие
- Скорость повышения пола: низкая
- Система хрупкая, высокая волатильность

`Фаза 2 — Переход` (умеренное отношение TOL/предложение):

- Оба механизма вносят сравнимый вклад
- Повышение пола ускоряется
- Формируется гравитационная яма загрузки (~15% TOL/капитализация)

`Фаза 3 — Созревание` (высокое отношение TOL/предложение):

- Доминирует механизм XYK
- Сходимость к равновесию
- Система демонстрирует стабильность

`Условность управления`: Храповик работает только когда управление поддерживает:

1. Распределения резервов TOL (предотвращает дренаж)
2. Механизм сжигания комиссий (обеспечивает сжатие предложения)
3. Коэффициенты распределения (обеспечивает накопление TOL)

Разворот требует решений управления: вывод резервов, деактивация комиссий или изменение распределений. Повышение пола представляет динамику, зависящую от состояния, а не необратимое прогрессирование.

### 3.4 Двунаправленное сжатие

`Эффекты сжигания предложения`:

```
Ценообразование TMC демонстрирует явную зависимость от предложения:
P_TMC(S) = P₀ + m·S/PRECISION

Когда предложение уменьшается на ΔS:
ΔP_ceiling = -m·ΔS/PRECISION (сжатие потолка)
P_floor = const(R_TOL) (пол неизменен при постоянных резервах)

Чистый эффект: сжатие спреда со сходимостью пол-потолок
```

`Пример прогрессии` (R_TOL = 666 667 Foreign, m = 1 500 000):

| Предложение | P_ceiling | P_floor (мин) | Спред |
| ----------- | --------- | ------------- | ----- |
| 1M          | 1,501     | 0,11          | 13,6× |
| 500k        | 0,751     | 0,22          | 3,4×  |
| 200k        | 0,301     | 0,56          | 0,54× |

`Критическая точка`: Когда P_floor > P_ceiling, арбитражные стимулы меняются. Эмиссия становится более привлекательной, чем рыночная продажа, создавая естественное равновесие.

### 3.5 Анализ равновесия

`Равновесие обеспечения`:

Цена, при которой рыночная капитализация (`P·S`) полностью обеспечена валютным резервом (`R_foreign`).

```
P_eq ≈ √(R_foreign · m_slope)
```

`Проверка размерности`:

```
√([Foreign] · [Foreign/Native²]) = √([Foreign²/Native²]) = [Foreign/Native] = [Price]
```

`Значимость`:

- `Гравитационный колодец`: Цена колеблется вокруг этого значения по мере стабилизации волатильности.
- `Поведение роутера`: Ниже `P_eq` предложение "перепродано" (сильная поддержка пола). Выше `P_eq` предложение имеет "премию" (обусловлено полезностью).

`Численный пример`:

```
R_TOL = 1 000 000 нативных токенов
m = 1 000 000 000 (наклон в единицах PRECISION)
PRECISION = 10¹²

P_eq ≈ √(1 000 000 × 1 000 000 000 / 10¹²)
    = √1 000
    ≈ 31,62 Foreign на Native
```

`Интерпретация`: Равновесие представляет ценовой уровень, где механизмы TMC и XYK дают эквивалентное ценообразование. Система сходится к этой точке через сжигание предложения. Скорость сходимости зависит от скорости сжигания; более высокие комиссии ускоряют приближение.

`Зависимость от управления`: Равновесие явно зависит от параметров R_TOL и m. Изменения в распределении TOL или наклоне напрямую изменяют цель сходимости. Это позволяет управлению корректировать долгосрочные ценовые цели через модификацию параметров.

---

## 4. Экономическая модель

### 4.1 Динамика предложения

`Эмиссия`: Однонаправленная эмиссия создает монотонно возрастающий потолок предложения. Отсутствие механизма выкупа предотвращает дренаж резервов.

`Сжатие`: Сжигание комиссий создает дефляционное давление. Чистая траектория предложения зависит от скорости эмиссии против скорости сжигания:

```
dS/dt = скорость_эмиссии - скорость_сжигания
где скорость_сжигания = f_router × V_trade
```

`Эффективность капитала`: Многокорзинный TOL достигает ~100% использования капитала через циклы развертывания:

- `Традиционное казначейство`: 0% (держит необеспеченные токены)
- `Однопульный TOL`: ~50% (капитал заблокирован в одном пуле)
- `Четырехкорзинный TOL`: ~100% (непрерывное развертывание ликвидности XYK с переработкой временных буферов, разные пороги управления)

`Гибкость`: Независимость корзин обеспечивает:

- `Корзина_A`: Выделенная базовая цель поддержки пола; политика управления должна рассматривать её как защищённый капитал и минимизировать пути вывода
- `Корзины 2-4`: Стратегическое развертывание по решениям управления
- Эффективный пол в диапазоне 11% минимум (только Корзина_A) до 25% максимум (все корзины) в зависимости от выбора развертывания

### 4.2 Премия инфраструктуры

`Теорема`: При равной глубине ликвидности ликвидность, принадлежащая протоколу, обеспечивает лучшее исполнение, чем наемный LP-капитал.

`Набросок доказательства`:

1. Наемные LP извлекают комиссии (разбавляют резервы со временем)
2. Протокольный TOL растет от эмиссий (накапливается со временем)
3. При равной начальной ликвидности TOL обеспечивает более узкие спреды долгосрочно

`Следствие`: Нулевые комиссии XYK (по умолчанию) оптимальны, когда TOL обеспечивает всю ликвидность. Не нужно компенсировать внешним LP; протокол выигрывает от узких спредов и удобства пользователей.

### 4.3 Потоки стоимости

`Поток эмиссии`:

```
Платеж в иностранной валюте → Расчет TMC → Эмиссия токенов
                                                  ↓
                             Пользователь (33,3%) + TOL (66,6%)
                                                       ↓
                             TOL → Многокорзинное распределение → Пулы XYK
```

`Торговый поток`:

```
Запрос сделки → Сравнение цен роутера → Выбор маршрута
                                             ↓
                         TMC (если лучше) или XYK (если лучше)
                                             ↓
                         Сбор комиссий (0,5%) → Буфер иностранной валюты → Исполнение сжигания
```

`Поток сжигания`:

```
Накопление иностранных комиссий → Достигнут порог → Обмен на нативные → Сжигание
                                                   ↓
                     Предложение уменьшается → Потолок сжимается + Пол повышается
```

---

## 5. Системная динамика

### 5.1 Благоприятный цикл

```
Принятие → Эмиссии → Более высокий потолок + Больше TOL
    ↓                                      ↓
Активность ← Торговля ← Более высокий пол (более сильная поддержка)
    ↓
Сжигание ← Комиссии ← Объем
    ↓
Более узкий диапазон → Сниженная волатильность → Повышенная уверенность → Принятие
```

`Механизмы обратной связи`:

- Положительная: Принятие стимулирует эмиссию → накопление TOL → более сильный пол → уверенность → принятие
- Отрицательная: Высокая волатильность → сниженная уверенность → меньшее принятие → более медленный рост TOL
- Стабилизирующая: Повышение пола → сниженный недостаток → улучшенная доходность с поправкой на риск

### 5.2 Системное поведение

`Области равновесия`:

- `Близость к полу`: Сниженная арбитражная возможность; ожидание катализатора
- `Полоса равновесия`: Сбалансированные силы; стабильная торговля отражает справедливую стоимость
- `Близость к потолку`: Эмиссия стимулируется; эмиссия ускоряется

`Динамика волатильности`: Сжатие спреда (P_ceiling - P_floor) монотонно уменьшается со временем при устойчивом сжигании. Это представляет математическое следствие сжатия предложения с фиксированными коэффициентами резервов, а не экономическое обещание, но детерминированный результат, зависящий от поддержания управлением условий.

### 5.3 Путь эволюции

`Фаза развития с высокой волатильностью`:

- Широкий ценовой диапазон, характерный для ранних систем
- Строительство пола через накопление TOL
- Обнаружение цены через рыночные механизмы

`Фаза созревающего роста`:

- Управление стратегически развертывает TOL (расширение парачейнов, финансирование разработки)
- Гибкость фреймворка обеспечивает рост без жертвования защитой пола
- Эффекты сжигания создают дефляционное давление

`Фаза зрелой экосистемы`:

- Стабильность возникает из накопленной глубины TOL
- Сжатие диапазона приближается к равновесию
- Управление поддерживает гибкость развертывания

`Фаза продвинутой стабильности`:

- Узкий диапазон достигается через двунаправленное сжатие
- Цена сходится к √(R_TOL × m / PRECISION)
- Система демонстрирует свойства "актива растущей стабильности"

---

## 6. Требования к реализации

### 6.1 Техническая реализация

`Управление резервами TOL`:

- Казначейство контролирует распределение через управление
- Вывод требует консенсуса (нет односторонних ключей администратора)
- Многокорзинная структура с независимыми LP-позициями
- Учет на основе долей предотвращает граничные случаи от изменений состояния пула

`Механизм XYK`:

- Формула постоянного произведения необходима для свойств пола
- Инициализация пула через механизм Zap с обработкой дисбалансов
- Защита от проскальзывания предотвращает извлечение стоимости
- Резервы прозрачны и проверяемы в блокчейне

`Маршрутизация комиссий`:

- Роутер собирает комиссию 0,5% (настраивается через управление)
- Иностранные комиссии накапливаются до минимального порога
- Исполнение сжигания меняет на нативные, удаляет из предложения
- Общее сожженное отслеживается для прозрачности

`Требования к точности`:

- PRECISION = 10¹² для типов Price и Slope
- PPM = 10⁶ для безразмерных отношений
- Вся арифметика проверяется на переполнение
- Размерная корректность обеспечивается системой типов

### 6.2 Критические инварианты

`Сохранение`:

```
user_amount + tol_amount ≡ total_minted
```

Нарушение указывает на ошибку расчета распределения.

`Постоянное произведение`:

```
k = R_native × R_foreign (до) ≈ k' (после комиссий)
```

Сделки XYK сохраняют k в пределах толерантности комиссий.

`Неотрицательные резервы`:

```
R_native > 0 и R_foreign > 0 всегда
```

Истощение резервов нарушило бы гарантию пола.

`Монотонный потолок`:

```
P_ceiling(S₂) ≥ P_ceiling(S₁) для S₂ ≥ S₁
```

Ценовой потолок никогда не уменьшается, кроме как через сжигание.

### 6.3 Экономические условия

`Требование полезности`: Спрос на токены должен происходить из реальных случаев использования. Без полезности механизмы защиты от снижения работают изолированно без катализатора восстановления.

`Непрерывная разработка`: Улучшения протокола поддерживают конкурентное позиционирование. Пол обеспечивает время для разработки; восстановление требует предоставления полезности.

`Рыночная динамика`: Долгосрочные держатели неявно принимают волатильность во время созревания. Защита пола ограничивает недостаток; рост зависит от полезности и принятия.

`Прозрачная коммуникация`: Структуры комиссий и формулы распределения раскрыты. Решения управления видимы участникам. Защита пола явно помечена как зависящая от управления.

### 6.4 Структура управления

#### 6.4.1 Модель управления супер-пользователем

Система запускается с `привилегиями супер-пользователя`, назначенными команде основателей, обеспечивая полный административный контроль в течение начальной фазы бутстрапа. Эта централизованная модель управления позволяет быстро корректировать протокол и улучшать безопасность на критических ранних этапах разработки.

`Возможности супер-пользователя`:

- Полномочия по корректировке параметров (коэффициенты TOL, ставки комиссий, распределение корзин)
- Активация аварийных механизмов для инцидентов безопасности
- Выполнение обновлений и миграций протокола
- Управление казначейством и стратегические решения по распределению

`Право вето команды`: После удаления супер-пользователя команда сохраняет `право голоса вето`, представляющее Native токены, содержащиеся в резервах TOL. Этот механизм вето обеспечивает постоянную защиту от атак управления, одновременно обеспечивая прогрессивную децентрализацию.

`Механика права вето`:

- Команда голосует с помощью Native токенов, хранящихся в TOL, для решений о вето
- Вето требует порога >50% от общей силы голоса
- Право вето применяется исключительно к критическим изменениям параметров, влияющим на:
  - Коэффициенты распределения TOL (механизмы защиты пола)
  - Параметры сжигания комиссий (сжатие предложения)
  - Активацию аварийных механизмов
  - Решения о миграции или завершении протокола

#### 6.4.2 Прогрессивный переход к DAO

`Вестнинг силы управления`: Система поддерживает постепенную децентрализацию через механизмы вестнинга, применяемые к праву вето. По мере созревания протокола и демонстрации компетентности сообществом управления, право вето может быть постепенно сокращено:

- `Фаза 1`: Полное право вето команды с силой голоса TOL
- `Фаза 2`: Сниженные пороги вето (например, 75% → 60% → 51%)
- `Фаза 3`: Вето с временной блокировкой и периодами охлаждения
- `Фаза 4`: Контролируемое сообществом вето через управление DAO

`Техническое обеспечение`: Будущие реализации могут технически ограничить управление командой только возможностями вето, предотвращая манипуляции параметрами при сохранении надзора за безопасностью.

#### 6.4.3 Дисциплина казначейства

`Соблюдение параметров`:

- Коэффициент распределения TOL (66,6% по умолчанию)
- Распределение корзин (50% Корзина_A, по 16,67% для 2-4)
- Ставки комиссий (0,5% роутер, 0,0% XYK по умолчанию)
- Пороги сжигания и параметры исполнения
- Графики передачи права вето

`Коммуникация рисков`: Документация явно указывает, что защита пола зависит от поддержания управлением условий. Абсолютные гарантии не предоставляются. Участники рынка понимают, что восстановление требует предоставления полезности за пределами механизма пола.

---

## 7. Преимущества и компромиссы

### 7.1 Сильные стороны фреймворка

`Математически определенные границы`:

- Пол: диапазон 11-25% в зависимости от использования корзин
- Потолок: Детерминирован через линейную кривую
- Оба проверяемы в блокчейне через прозрачные формулы

`Гибкость управления`:

- Многокорзинная система позволяет балансировать защиту и разработку
- Параметры комиссий настраиваемы для экономической оптимизации
- Стратегии развертывания адаптируются к рыночным условиям

`Эффективность капитала`:

- ~100% использование капитала через независимую структуру корзин с переработкой буферов
- Нет наемного капитала, требующего доходных стимулов
- Протокол владеет ликвидностью, управление контролирует стратегию

### 7.2 Ограничения фреймворка

`Зависимости от управления`:

- Защита пола требует непрерывного соблюдения параметров
- Вывод резервов пропорционально снизит эффективный пол
- Аварийные механизмы могут обойти нормальные ограничения

`Рыночные зависимости`:

- Восстановление от пола требует рыночной уверенности в полезности
- Пол предоставляет возможность, но не гарантию роста
- Арбитраж создает механизм, но не обязательство восстановления

`Компромиссы сложности`:

- Многокорзинная структура добавляет накладные расходы управления
- Механизм Zap требует сложного управления ликвидностью
- Роутер требует поддержания инфраструктуры обнаружения цены

---

## 8. Резюме

TMCTOL устанавливает фреймворк с математически выведенными ценовыми отношениями и параметрами, контролируемыми управлением:

`Основные механизмы`:

- Однонаправленная эмиссия через линейную кривую создает детерминированный потолок
- 66,6% распределение TOL в резервы XYK устанавливает гиперболический пол
- Сжигание комиссий (0,5% комиссия роутера) сжимает предложение, стимулируя повышение пола
- Многокорзинная архитектура обеспечивает гибкость управления между защитой и разработкой

`Математический фреймворк`:

```
Потолок:    P_ceiling = P₀ + m·S/PRECISION
Пол:        P_floor = k / (R_native + S_sold)²
Равновесие: P_eq ≈ √(R_TOL × m / PRECISION)
Скорость:   dP_floor/dt ∝ скорость_сжигания/(R_native)⁴
```

`Критические зависимости`:

1. Управление поддерживает распределение TOL (66,6% эмиссий)
2. Распределение корзин соблюдается (Корзина_A для поддержки пола)
3. Механизм сжигания комиссий работает непрерывно
4. Резервы защищены от вывода без консенсуса

`Границы фреймворка`:

Защита пола работает в диапазоне 11-25% в зависимости от развертывания казначейских корзин:

- Максимальная защита (25%): Все корзины обеспечивают поддержку, развертывания нет
- Минимальная защита (11%): Только Корзина_A обеспечивает поддержку, остальные развернуты
- Управление контролирует компромисс между силой пола и развитием экосистемы

`Требования к реализации`:

Система демонстрирует предсказанную динамику (повышение пола, сжатие диапазона) только когда управление поддерживает соответствующие параметры. Риск снижения остается ограниченным математическими отношениями. Восстановление роста зависит от предоставления протоколом полезности и поддержания рыночной уверенности. Фреймворк предоставляет количественно определяемые параметры риска, а не абсолютные гарантии.

---

- `Версия`: 1.1.0
- `Дата`: Февраль 2026
- `Автор`: LLB Lab
- `Лицензия`: MIT
